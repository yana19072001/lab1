def mod_pow(base, exp, mod):
    res = 1
    while exp > 0:
        if exp % 2 == 1:
            res = (res * base) % mod
        base = (base * base) % mod
        exp //= 2
    return res

def encrypt_message(message, e, N):
    encr_message = ""
    for letter in message:
        m = ord(letter)
        c = mod_pow(m, e, N)
        encr_message += str(c) + " "
    return encr_message

def decrypt_message(encrypted_message, d, N):
    decrypt_message = ""
    tokens = encrypted_message.split()
    for token in tokens:
        c = int(token)
        m = mod_pow(c, d, N)
        decrypt_message += chr(m)
    return decrypt_message

def main():
    x = 61
    y = 53
    N = x * y
    PHI = (x - 1) * (y - 1)
    e = 17
    d = 1

    while (d * e) % PHI != 1:
        d += 1

    mess = input("Введите фразу:\n")

    encr_mess = encrypt_message(mess, e, N)
    decrypt_mess = decrypt_message(encr_mess, d, N)

    print("Начальная фраза:", mess)
    print("Зашифрованная фраза:", encr_mess)
    print("Дешифрованная фраза:", decrypt_mess)

# Вызовем функцию main() при выполнении скрипта
main()
